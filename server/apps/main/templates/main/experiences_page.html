{% extends 'main/application.html' %}

{% block title %}AutSPACEs - Public Experiences {% endblock %}

{% load static %}
{% load custom_tags %}
{% load humanize %}

{% block content %}


<div class="experience-intro">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-left">
        <h1 class="big-heading">Shared Stories</h1>
      </div>
      <div class="col-lg-12 text-left">
        <p class="intro-text">Autistic people often have different sensory processing to people who are not autistic.
          By collecting together lots of autistic peopleâ€™s experiences, we can change spaces so that they are
          better for autistic people.
        </p>
      </div>
    </div>
  </div>
</div>

<!-- <section id="search-section">
  <div class="container search">
    <form id=search-form method="GET" action="{% url 'main:public_experiences' %}">
      <div class="form-row align-items-center" style="left: 0px">
        <div class="col-lg-8">
          <label class="sr-only" for="inlineFormInput">Name</label>
          <input class="form-control mb-2"
                  id="inlineFormInput"
                  placeholder="Search Stories"
                  type="text"
                  name="searched"
                  >
        </div>

        <div class="col-auto">
          <div class="form-check mb-2">
            <input class="form-check-input" id="autoSizingCheck" type="checkbox" name="triggering_stories" value="True">
            <label class="form-check-label" for="autoSizingCheck">
              See All Triggering Stories
            </label>
          </div>
        </div>
        <div class="col-auto">
          <button class="btn btn-primary mb-2" type="submit">Search Stories</button>
        </div>
      </div>
    <div>
      <p>We have excluded potentially triggering content, if you would like to see more content please choose which categories you would like to see</p>
      </div>
      <div class="form-check mb-2">
        <div class="form-check form-check-inline">
          {% if checkabuse %}
            <input class="form-check-input" type="checkbox" id="abuse-checkbox" name="abuse" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="abuse-checkbox" name="abuse" value="True">
          {% endif %}
          <label class="form-check-label" for="abuse-checkbox">Abuse (physical, sexual, emotional and verbal)</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checkdrug %}
            <input class="form-check-input" type="checkbox" id="drug-checkbox" name="drug" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="drug-checkbox" name="drug" value="True">
          {% endif %}
          <label class="form-check-label" for="drug-checkbox">Drug and/or Alcohol misuse</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checknegbody %}
            <input class="form-check-input" type="checkbox" id="negbody-checkbox" name="negbody" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="negbody-checkbox" name="negbody" value="True">
          {% endif %}
          <label class="form-check-label" for="negbody-checkbox">Negative body image</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checkviolence %}
          <input class="form-check-input" type="checkbox" id="violence-checkbox" name="violence" value="True" checked>
          {% else %}
          <input class="form-check-input" type="checkbox" id="violence-checkbox" name="violence" value="True">
          {% endif %}
          <label class="form-check-label" for="violence-checkbox">Violence and Assault</label>

        </div>
        <div class="form-check form-check-inline">
          {% if checkmentalhealth %}
            <input class="form-check-input" type="checkbox" id="mentalhealth-checkbox" name="mentalhealth" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="mentalhealth-checkbox" name="mentalhealth" value="True">
          {% endif %}
          <label class="form-check-label" for="mentalhealth-checkbox">Mental Health Issues</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checkother %}
            <input class="form-check-input" type="checkbox" id="other-checkbox" name="other" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="other-checkbox" name="other" value="True">
          {% endif %}
          <label class="form-check-label" for="other-checkbox">Other</label>
        </div>
        <div class="custom-control custom-switch">
          <input type="checkbox" class="custom-control-input" id="customSwitch1" checked>
          <label class="custom-control-label" for="customSwitch1">Toggle this switch element</label>
        </div> -->
        <!-- <div class="custom-control custom-switch">
          <input type="checkbox" class="custom-control-input" id="customSwitch2">
          <label class="custom-control-label" for="customSwitch2">Toggle this switch element</label>
        </div>
      </div>

    </form>
  </div>
</section> -->


<section id="hd-section">
  <div class="container search">
    <form id=search-form method="GET" action="{% url 'main:public_experiences' %}">
      <div class="form-row align-items-center" style="left: 0px">
        <div class="col-lg-10">
          <label class="sr-only" for="inlineFormInput">Name</label>
            <input class="form-control mb-2" id="inlineFormInput" placeholder="Search Stories" value="{{ searched }}" type="text" name="searched">
        </div>
        <div class="col-auto">
          <button class="btn btn-primary mb-2" type="submit">Search Stories</button>
        </div>
      </div>
    <div>
      <div class="trigger-warning-message"> We have excluded potentially triggering content, if you would like to see more content please choose which categories you would like to see</div>
      </div>
      <div class="form-check mb-2">
        <div class="form-check">
          {% if checkall %}
            <input class="form-check-input" type="checkbox" id="all-checkbox" name="all_triggers" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="all-checkbox" name="all_triggers" value="True">
          {% endif %}
          <label class="form-check-label" for="all-checkbox">Allow all triggering content</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checkabuse %}
            <input class="form-check-input" type="checkbox" id="abuse-checkbox" name="abuse" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="abuse-checkbox" name="abuse" value="True">
          {% endif %}
          <label class="form-check-label" for="abuse-checkbox">Abuse (physical, sexual, emotional and verbal)</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checkdrug %}
            <input class="form-check-input" type="checkbox" id="drug-checkbox" name="drug" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="drug-checkbox" name="drug" value="True">
          {% endif %}
          <label class="form-check-label" for="drug-checkbox">Drug and/or Alcohol misuse</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checknegbody %}
            <input class="form-check-input" type="checkbox" id="negbody-checkbox" name="negbody" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="negbody-checkbox" name="negbody" value="True">
          {% endif %}
          <label class="form-check-label" for="negbody-checkbox">Negative body image</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checkviolence %}
          <input class="form-check-input" type="checkbox" id="violence-checkbox" name="violence" value="True" checked>
          {% else %}
          <input class="form-check-input" type="checkbox" id="violence-checkbox" name="violence" value="True">
          {% endif %}
          <label class="form-check-label" for="violence-checkbox">Violence and Assault</label>

        </div>
        <div class="form-check form-check-inline">
          {% if checkmentalhealth %}
            <input class="form-check-input" type="checkbox" id="mentalhealth-checkbox" name="mentalhealth" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="mentalhealth-checkbox" name="mentalhealth" value="True">
          {% endif %}
          <label class="form-check-label" for="mentalhealth-checkbox">Mental Health Issues</label>
        </div>
        <div class="form-check form-check-inline">
          {% if checkother %}
            <input class="form-check-input" type="checkbox" id="other-checkbox" name="other" value="True" checked>
          {% else %}
            <input class="form-check-input" type="checkbox" id="other-checkbox" name="other" value="True">
          {% endif %}
          <label class="form-check-label" for="other-checkbox">Other</label>
        </div>
      </div>

    </form>
  </div>
  {% if searched %}
    <div class="container-fluidr story-text">
    <p class="story-header">Search results for '{{ searched }}'</p>
    </div>
  {% endif %}
</section>


<section id="stories-post">
  <div class="container-fluidr story-text">
    {% for experience in experiences %}
    <div class="row">
      <div class="col-lg-12 story">
        <div class="card w-100">
          <div class="card-body story">
            <h5 class="card-title story-header">{{ forloop.counter }}. {% firstof experience.title_text "no title given" %}
              {% if experience.abuse or experience.violence or experience.drug or experience.mentalhealth or experience.negbody or experience.other %}
                <span class="badge badge-warning float-right" style="font-size: 1rem; margin-top:2%">Includes triggering contents</span>
              {% endif %}
            </h5>
              <p class="card-text">{% firstof experience.experience_text|truncatechars:100 "no experience text given" %}</p>
              <em>AutSPACEs Contributor</em>
              <a
              class="btn btn-primary collapsed float-right"
              data-toggle="collapse"
              href="#exp{{ experience.experience_id }}"
              aria-expanded="false"
              aria-controls="exp{{ experience.experience_id }}"
              style="text-align: right">
              Read Full Story
              </a>
          </div>
          <div
          class="collapse"
          id="exp{{ experience.experience_id }}">
          <h4 class="story-card-title">Full Story</h4>
          <p class="story-card-text">{% firstof experience.experience_text "no experience text given" %} </p>
          <h4 class="story-card-title">Recommendation</h4>
          <p class="story-card-text">{% firstof experience.difference_text "no recommendation text given" %} </p>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
    {% if not experiences %}
      <div class="no-stories-message text-center">There are no stories that match the criteria.</div>
    {% endif %}
  </div>
</section>

<script src="{% static 'js/shared-stories-filtering.js' %}"></script>
{% endblock %}
